function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=e.parcelRequireb8d4;null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},e.parcelRequireb8d4=i),i.register("2gulD",(function(e,n){t(e.exports,"Gl",(()=>i("5G9Pv").Gl)),t(e.exports,"TextureFilter",(()=>i("5G9Pv").TextureFilter)),t(e.exports,"PrimitivesType",(()=>i("5G9Pv").PrimitivesType)),t(e.exports,"BlendFunction",(()=>i("5G9Pv").BlendFunction)),i("5G9Pv");var r,a,o=i("anxmg");i("71GDk"),i("7MtE5"),r=e.exports,a=o,Object.keys(a).forEach((function(t){"default"===t||"__esModule"===t||r.hasOwnProperty(t)||Object.defineProperty(r,t,{enumerable:!0,get:function(){return a[t]}})}))})),i.register("5G9Pv",(function(e,n){t(e.exports,"BlendFunction",(()=>s)),t(e.exports,"TextureFilter",(()=>l)),t(e.exports,"PrimitivesType",(()=>T)),t(e.exports,"Gl",(()=>F)),t(e.exports,"Texture",(()=>q));var r,a,o,u,s,c,l,f,h,p,d,y,g=i("71GDk"),m=i("7MtE5"),v=5126,b=3553,w=36160,x=36161;(a=r||(r={}))[a.Add=32774]="Add",a[a.Sub=32778]="Sub",a[a.RSub=32779]="RSub",(u=o||(o={}))[u.Never=512]="Never",u[u.Less=513]="Less",u[u.Equal=514]="Equal",u[u.LWqual=515]="LWqual",u[u.Greater=516]="Greater",u[u.NotEqual=517]="NotEqual",u[u.GEqual=518]="GEqual",u[u.Always=519]="Always",(c=s||(s={}))[c.Zero=0]="Zero",c[c.One=1]="One",c[c.SrcColor=768]="SrcColor",c[c.OneMinusSrcColor=769]="OneMinusSrcColor",c[c.DstColor=774]="DstColor",c[c.OneMinusDstColor=775]="OneMinusDstColor",c[c.SrcAlpha=770]="SrcAlpha",c[c.OneMinusSrcAlpha=771]="OneMinusSrcAlpha",c[c.DstAlpha=772]="DstAlpha",c[c.OneMinusDstAlpha=773]="OneMinusDstAlpha",c[c.SrcAlphaSaturate=776]="SrcAlphaSaturate",(f=l||(l={}))[f.Nearest=9728]="Nearest",f[f.Linear=9729]="Linear",(p=h||(h={}))[p.Alpha=6406]="Alpha",p[p.Luminance=6409]="Luminance",p[p.LuminanceAlpha=6410]="LuminanceAlpha",p[p.Rgb=6407]="Rgb",p[p.Rgba=6408]="Rgba",(y=d||(d={}))[y.Vertex=35633]="Vertex",y[y.Fragment=35632]="Fragment";var A,S,L,E,V,B,T,P;(S=A||(A={}))[S.NoError=0]="NoError",S[S.InvalidEnum=1280]="InvalidEnum",S[S.InvalidValue=1281]="InvalidValue",S[S.InvalidOperation=1282]="InvalidOperation",S[S.OutOfMemory=1285]="OutOfMemory",(E=L||(L={}))[E.Stream=35040]="Stream",E[E.Static=35044]="Static",E[E.Dynamic=35048]="Dynamic",(B=V||(V={}))[B.Array=34962]="Array",B[B.Elements=34963]="Elements",(P=T||(T={}))[P.Points=0]="Points",P[P.Lines=1]="Lines",P[P.LineStrip=3]="LineStrip",P[P.LineLoop=2]="LineLoop",P[P.Triangles=4]="Triangles",P[P.TriangleStrip=5]="TriangleStrip",P[P.TriangleFan=6]="TriangleFan";var M,F=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.settingsCache=M.initial();var n=t[0],r=t[1];"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement?this.handle=n.getContext("webgl",r):this.handle=n,this.instancedArrays=this.handle.getExtension("ANGLE_instanced_arrays")}return t.prototype.isContextLost=function(){return this.handle.isContextLost()},t.prototype.getPointSizeRange=function(){return this.handle.getParameter(33901)},t.prototype.cleanColorBuffer=function(){return this.handle.clear(16384),this},t.prototype.cleanDepthBuffer=function(){return this.handle.clear(256),this},t.prototype.cleanBuffers=function(){return this.handle.clear(16640),this},t.prototype.drawArrays=function(t,e){return this.handle.drawArrays(t,0,e),this},t.prototype.drawsElements=function(t,e){return this.handle.drawElements(t,e,5123,0),this},t.prototype.drawInstancedArrays=function(t,e,n){return this.instancedArrays.drawArraysInstancedANGLE(t,0,e,n),this},t.prototype.drawsInstancedElements=function(t,e,n){return this.instancedArrays.drawElementsInstancedANGLE(t,e,5123,0,n),this},t.prototype.settings=function(){return new O(this,this.settingsCache)},t.prototype.texture=function(t){return new q(this,t)},t.prototype.renderBuffer=function(t,e){return new C(this,t,e)},t.prototype.frameBuffer=function(t,e){return new D(this,t,e)},t.prototype.arrayBuffer=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=L.Dynamic),new G(this,t,e)},t.prototype.elementsBuffer=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=L.Dynamic),new I(this,t,e)},t.prototype.program=function(t,e){var n=this;return m.uses((function(){return new k(n,d.Vertex,t)}),(function(){return new k(n,d.Fragment,e)}))((function(t,e){return new z(n,t,e)}))},t.prototype.command=function(t,e){return g.command(this,t,e)},t.prototype.dispose=function(){var t=this.handle.getExtension("WEBGL_lose_context");t&&t.loseContext()},t}();(M||(M={})).initial=function(){return{blend:!1,viewport:[0,0,0,0],scissorTest:!1,scissorBox:[0,0,0,0],depthTest:!1,depthFunction:o.Less,clearDepth:1,lineWidth:1,blendEquation:[r.Add,r.Add],blendFunction:[s.One,s.Zero,s.One,s.Zero],clearColor:[0,0,0,0],activeTexture:0,textures:new Map,arrayBuffer:null,elementsBuffer:null,program:null,enabledAttributes:new Set,instancedAttributes:new Set,renderBuffer:null,frameBuffer:null}};var O=function(){function t(e,n,r){var i,a;void 0===r&&(r=function(t){return t()}),this.gl=e,this.cache=n,this.apply=r,this.blend=t.cached({read:function(t){return t.blend},write:function(t,e){t.blend=e},equals:function(t,e){return t===e},apply:function(t,e){e?t.handle.enable(3042):t.handle.disable(3042)}}),this.viewport=(i=t.cached({read:function(t){return t.viewport},write:function(t,e){t.viewport=e},equals:function(t,e){return t.every((function(t,n){return t===e[n]}))},apply:function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3];t.handle.viewport(n,r,i,a)}}),function(t,e,n,r){return i.call(this,[t,e,n,r])}),this.scissorTest=t.cached({read:function(t){return t.scissorTest},write:function(t,e){t.scissorTest=e},equals:function(t,e){return t===e},apply:function(t,e){e?t.handle.enable(3089):t.handle.disable(3089)}}),this.scissorBox=function(){var e=t.cached({read:function(t){return t.scissorBox},write:function(t,e){t.scissorBox=e},equals:function(t,e){return t.every((function(t,n){return t===e[n]}))},apply:function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3];t.handle.scissor(n,r,i,a)}});return function(t,n,r,i){return e.call(this,[t,n,r,i])}}(),this.depthTest=t.cached({read:function(t){return t.depthTest},write:function(t,e){t.depthTest=e},equals:function(t,e){return t===e},apply:function(t,e){e?t.handle.enable(2929):t.handle.disable(2929)}}),this.clearDepth=t.cached({read:function(t){return t.clearDepth},write:function(t,e){t.clearDepth=e},equals:function(t,e){return t===e},apply:function(t,e){t.handle.clearDepth(e)}}),this.lineWidth=t.cached({read:function(t){return t.lineWidth},write:function(t,e){t.lineWidth=e},equals:function(t,e){return t===e},apply:function(t,e){t.handle.lineWidth(e)}}),this.blendEquation=function(){var e=t.cached({read:function(t){return t.blendEquation},write:function(t,e){t.blendEquation=e},equals:function(t,e){return t.every((function(t,n){return t===e[n]}))},apply:function(t,e){var n=e[0],r=e[1];t.handle.blendEquationSeparate(n,r)}});return function(t,n){return void 0===n&&(n=t),e.call(this,[t,n])}}(),this.blendFunction=function(){var e=t.cached({read:function(t){return t.blendFunction},write:function(t,e){t.blendFunction=e},equals:function(t,e){return t.every((function(t,n){return t===e[n]}))},apply:function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3];t.handle.blendFuncSeparate(n,r,i,a)}});return function(t,n,r,i){return void 0===r&&(r=t),void 0===i&&(i=n),e.call(this,[t,n,r,i])}}(),this.depthFunction=t.cached({read:function(t){return t.depthFunction},write:function(t,e){t.depthFunction=e},equals:function(t,e){return t===e},apply:function(t,e){t.handle.depthFunc(e)}}),this.clearColor=function(){var e=t.cached({read:function(t){return t.clearColor},write:function(t,e){t.clearColor=e},equals:function(t,e){return t.every((function(t,n){return t===e[n]}))},apply:function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3];t.handle.clearColor(n,r,i,a)}});return function(t,n,r,i){return e.call(this,[t,n,r,i])}}(),this.activeTexture=t.cached({read:function(t){return t.activeTexture},write:function(t,e){t.activeTexture=e},equals:function(t,e){return t===e},apply:function(t,e){t.handle.activeTexture(33984+e)}}),this.texture=(a=new Array(16).fill(null).map((function(e,n){return t.cached({read:function(t){return t.textures.get(n)||null},write:function(t,e){e?t.textures.set(n,e):t.textures.delete(n)},equals:function(t,e){return t===e},apply:function(t,e){t.settings().activeTexture(n).apply((function(){t.handle.bindTexture(b,(null==e?void 0:e.handle)||null)}))}})})),function(t,e){return a[t].call(this,e)}),this.arrayBuffer=t.cached({read:function(t){return t.arrayBuffer},write:function(t,e){t.arrayBuffer=e},equals:function(t,e){return t===e},apply:function(t,e){var n;t.handle.bindBuffer(34962,null!==(n=null==e?void 0:e.handle)&&void 0!==n?n:null)}}),this.elementsBuffer=t.cached({read:function(t){return t.elementsBuffer},write:function(t,e){t.elementsBuffer=e},equals:function(t,e){return t===e},apply:function(t,e){var n;t.handle.bindBuffer(34963,null!==(n=null==e?void 0:e.handle)&&void 0!==n?n:null)}}),this.program=t.cached({read:function(t){return t.program},write:function(t,e){t.program=e},equals:function(t,e){return t===e},apply:function(t,e){t.handle.useProgram(e?e.handle:null)}}),this.renderBuffer=t.cached({read:function(t){return t.renderBuffer},write:function(t,e){t.renderBuffer=e},equals:function(t,e){return t===e},apply:function(t,e){t.handle.bindRenderbuffer(x,e?e.handle:null)}}),this.frameBuffer=t.cached({read:function(t){return t.frameBuffer},write:function(t,e){t.frameBuffer=e},equals:function(t,e){return t===e},apply:function(t,e){t.handle.bindFramebuffer(w,e?e.handle:null)}})}return t.cached=function(e){var n=e.read,r=e.write,i=e.equals,a=e.apply;return function(e){var o=this;return this.then(new t(this.gl,this.cache,(function(t){var u=n(o.cache);if(i(u,e))return t();try{return r(o.cache,e),a(o.gl,e),t()}finally{r(o.cache,u),a(o.gl,u)}})))}},t.prototype.then=function(e){var n=this;return new t(this.gl,this.cache,(function(t){return n.apply((function(){return e.apply(t)}))}))},t.prototype.textures=function(t){for(var e=this,n=0;n<16;n++)e=e.texture(n,n>=t.length?null:t[n]);return e},t.prototype.enabledAttributes=function(e){var n=this;return this.then(new t(this.gl,this.cache,(function(t){var r=n.gl.handle,i=n.cache.enabledAttributes,a=new Set(e);n.cache.enabledAttributes=a;var o=function(t,e){t.forEach((function(t){e.has(t)||r.disableVertexAttribArray(t)})),e.forEach((function(e){t.has(e)||r.enableVertexAttribArray(e)}))};try{return o(i,a),t()}finally{o(a,i),n.cache.enabledAttributes=i}})))},t.prototype.instancedAttributes=function(e){var n=this;return this.then(new t(this.gl,this.cache,(function(t){var r=n.gl.instancedArrays,i=n.cache.instancedAttributes,a=new Set(e);n.cache.instancedAttributes=a;var o=function(t,e){t.forEach((function(t){e.has(t)||r.vertexAttribDivisorANGLE(t,0)})),e.forEach((function(e){t.has(e)||r.vertexAttribDivisorANGLE(e,1)}))};try{return o(i,a),t()}finally{o(a,i),n.cache.instancedAttributes=i}})))},t.prototype.renderTarget=function(e){var n=this;return new t(this.gl,this.cache,(function(t){return m.use(new D(n.gl,e),(function(r){return n.gl.settings().frameBuffer(r).viewport(0,0,e.width,e.height).apply(t)}))}))},t}(),q=function(){function t(t,e){var n=this;this.gl=t,this.handle=t.handle.createTexture(),this.format=e.format||h.Rgba,this.filter=e.filter||l.Nearest,"image"in e?(this.width=e.image instanceof HTMLImageElement?e.image.naturalWidth:e.image.width,this.height=e.image instanceof HTMLImageElement?e.image.naturalHeight:e.image.height):(this.width=e.width,this.height=e.height),t.settings().activeTexture(0).texture(0,this).apply((function(){t.handle.pixelStorei(37440,1),t.handle.texParameteri(b,10240,n.filter),t.handle.texParameteri(b,10241,n.filter),t.handle.texParameteri(b,10242,33071),t.handle.texParameteri(b,10243,33071),"image"in e?t.handle.texImage2D(b,0,n.format,n.format,5121,e.image):t.handle.texImage2D(b,0,n.format,n.width,n.height,0,n.format,5121,"data"in e?e.data:null)}))}return t.prototype.dispose=function(){this.gl.handle.deleteTexture(this.handle)},t}(),D=function(){function t(t,e,n){this.gl=t,this.colorBuffer=e,this.depthBuffer=n,this.handle=t.handle.createFramebuffer(),t.settings().frameBuffer(this).apply((function(){t.handle.framebufferTexture2D(w,36064,b,e.handle,0),n&&t.handle.framebufferRenderbuffer(w,36096,x,n.handle)}))}return t.prototype.dispose=function(){this.gl.handle.deleteFramebuffer(this.handle)},t}(),C=function(){function t(t,e,n){this.gl=t,this.widthValue=e,this.heightValue=n,this.handle=t.handle.createRenderbuffer(),t.settings().renderBuffer(this).apply((function(){t.handle.renderbufferStorage(x,33189,e,n)}))}return Object.defineProperty(t.prototype,"width",{get:function(){return this.widthValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.heightValue},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){var n=this.gl;return t===this.width&&e===this.height||(this.widthValue=t,this.heightValue=e,n.settings().renderBuffer(this).apply((function(){n.handle.renderbufferStorage(x,33189,t,e)}))),this},t.prototype.dispose=function(){this.gl.handle.deleteRenderbuffer(this.handle)},t}(),G=function(){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n=L.Dynamic),this.gl=t,this.usage=n,this.lengthValue=0,this.handle=t.handle.createBuffer(),e&&this.setContent(e)}return Object.defineProperty(t.prototype,"length",{get:function(){return this.lengthValue},enumerable:!1,configurable:!0}),t.prototype.setContent=function(t){var e=this,n=t instanceof Float32Array?t:new Float32Array(t);this.lengthValue=n.length;var r=this.gl;return r.settings().arrayBuffer(this).apply((function(){r.handle.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,n,e.usage)})),this},t.prototype.dispose=function(){this.gl.handle.deleteBuffer(this.handle)},t}(),I=function(){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n=L.Dynamic),this.gl=t,this.usage=n,this.lengthValue=0,this.handle=t.handle.createBuffer(),e&&this.setContent(e)}return Object.defineProperty(t.prototype,"length",{get:function(){return this.lengthValue},enumerable:!1,configurable:!0}),t.prototype.setContent=function(t){var e=this,n=t instanceof Uint8Array||t instanceof Uint16Array?t:new Uint16Array(t);this.lengthValue=n.length;var r=this.gl;return r.settings().elementsBuffer(this).apply((function(){r.handle.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,n,e.usage)})),this},t.prototype.dispose=function(){this.gl.handle.deleteBuffer(this.handle)},t}(),k=function(){function t(t,e,n){this.gl=t,this.type=e,this.source=n;var r=this.handle=t.handle.createShader(e);if(t.handle.shaderSource(r,n),t.handle.compileShader(r),!1===t.handle.getShaderParameter(r,35713))throw new Error("WebGL error '"+t.handle.getShaderInfoLog(r)+"' in '"+n+"'")}return t.prototype.dispose=function(){this.gl.handle.deleteShader(this.handle)},t}(),z=function(){function t(t,e,n){this.gl=t,this.vertex=e,this.fragment=n,this.uniforms={},this.attributes={};var r=this.handle=t.handle.createProgram();if(t.handle.attachShader(r,e.handle),t.handle.attachShader(r,n.handle),t.handle.linkProgram(r),t.handle.validateProgram(r),!1===t.handle.getProgramParameter(r,35714))throw new Error(t.handle.getProgramInfoLog(r)||"Program linking error:\n"+e.source+";\n"+n.source);for(var i=t.handle.getProgramParameter(r,35718),a=0;a<i;a++){null!==(u=t.handle.getActiveUniform(r,a))&&(this.uniforms[u.name]={type:u.type,location:t.handle.getUniformLocation(r,u.name),size:u.size})}var o=t.handle.getProgramParameter(r,35721);for(a=0;a<o;a++){var u;null!=(u=t.handle.getActiveAttrib(r,a))&&(this.attributes[u.name]={type:u.type,location:a,size:u.size})}}return t.prototype.setUniform=function(t,e){var n=this.gl,r=this.uniforms[t];if(r){var i=r.location,a=r.type;n.settings().program(this).apply((function(){switch(a){case 35670:n.handle.uniform1i(i,e[0]?1:0);break;case 35678:n.handle.uniform1iv(i,e);break;case v:n.handle.uniform1fv(i,e);break;case 35664:n.handle.uniform2fv(i,e);break;case 35665:n.handle.uniform3fv(i,e);break;case 35666:n.handle.uniform4fv(i,e);break;case 35674:n.handle.uniformMatrix2fv(i,!1,e);break;case 35675:n.handle.uniformMatrix3fv(i,!1,e);break;case 35676:n.handle.uniformMatrix4fv(i,!1,e)}}))}},t.prototype.setAttribute=function(t,e,n,r){var i=this.attributes[t];if(null!=i){var a=this.gl;a.settings().arrayBuffer(e).apply((function(){a.handle.vertexAttribPointer(i.location,function(){switch(i.type){case v:return 1;case 35664:return 2;case 35665:return 3;case 35666:case 35674:return 4;case 35675:return 9;case 35676:return 16;default:throw new Error("Invalid attribute type '"+i.type+"'")}}(),v,!1,4*n,4*r)}))}else console.warn("Attribute '"+t+"' not found")},t.prototype.dispose=function(){this.gl.handle.deleteProgram(this.handle)},t}()})),i.register("71GDk",(function(e,n){t(e.exports,"command",(()=>u));var r=i("anxmg"),a=i("5G9Pv"),o=function(){function t(t,e,n){var i=this;for(var a in this.gl=t,this.primitivesType=e,this.source=n,this.textureInstances=new Map,this.textureIndexes=new Map,this.program=t.program(n.vertex,n.fragment),this.attributes=t.arrayBuffer(),this.instances=t.arrayBuffer(),this.elements=t.elementsBuffer(),this.attributesStride=r.TypeMap.stride(n.attributes),this.attributesLayout=r.TypeMap.layout(n.attributes),this.instancesStride=r.TypeMap.stride(n.instances),this.instancesLayout=r.TypeMap.layout(n.instances),this.attributesLayout.forEach((function(t){i.program.setAttribute(t.name,i.attributes,t.stride,t.offset)})),this.instancesLayout.forEach((function(t){i.program.setAttribute(t.name,i.instances,t.stride,t.offset)})),n.uniforms)r.TypeMap.getType(n.uniforms[a])===r.Type.Sampler&&this.textureIndexes.set(a,this.textureIndexes.size)}return t.prototype.prepareData=function(t,e,n){var r=new Float32Array(t*n.length);return n.forEach((function(n,i){e.forEach((function(e){var a=n[e.name],o=t*i+e.offset;if(Array.isArray(a))for(var u=0;u<a.length;u++)r[o+u]=a[u];else if(1===e.size&&"number"==typeof a)r[o]=a;else if(2===e.size){var s=a,c=s.x,l=s.y;r[o]=c,r[o+1]=l}else{if(3!==e.size)throw new Error("Unsupported attribute '"+e.name+"' value: "+JSON.stringify(a));var f=a,h=(c=f.x,l=f.y,f.z);r[o]=c,r[o+1]=l,r[o+2]=h}}))})),r},t.prototype.setAttributes=function(t){var e=this.prepareData(this.attributesStride,this.attributesLayout,t);return this.attributes.setContent(e),this},t.prototype.setInstances=function(t){var e=this.prepareData(this.instancesStride,this.instancesLayout,t);return this.instances.setContent(e),this},t.prototype.setElements=function(t){return this.elements.setContent(t),this},t.prototype.setUniforms=function(t){var e=this.source.uniforms;for(var n in t){var i=t[n],o=void 0;if("number"==typeof i)o=[i];else if(Array.isArray(i))o=i;else if(i instanceof a.Texture){var u=this.textureIndexes.get(n);this.textureInstances.set(u,i),o=[u]}else if(e[n]===r.Type.Vector2){var s=i;o=[s.x,s.y]}else{if(e[n]!==r.Type.Vector3)throw new Error("Invalid value for uniform '"+n+"', expected "+e[n]);var c=i;o=[c.x,c.y,c.z]}this.program.setUniform(n,o)}return this},t.prototype.draw=function(t,e,n){var r=this;void 0===t&&(t=this.instancesStride?this.instances.length/this.instancesStride:null),void 0===e&&(e=this.attributesStride?this.attributes.length/this.attributesStride:null),void 0===n&&(n=this.elements.length);var i=this.gl;i.settings().program(this.program).enabledAttributes(Object.keys(this.program.attributes).map((function(t){var e;return null===(e=r.program.attributes[t])||void 0===e?void 0:e.location})).filter((function(t){return null!=t}))).instancedAttributes(this.instancesLayout.map((function(t){return t.name})).map((function(t){var e;return null===(e=r.program.attributes[t])||void 0===e?void 0:e.location})).filter((function(t){return null!=t}))).textures(Array.from(this.textureInstances.entries()).reduce((function(t,e){var n=e[0],r=e[1];return t[n]=r,t}),new Array(16).fill(null))).apply((function(){if(null!==t&&0!==n)i.settings().elementsBuffer(r.elements).apply((function(){i.drawsInstancedElements(r.primitivesType,n,t)}));else if(null!==t&&null!==e)i.drawInstancedArrays(r.primitivesType,e,t);else if(0!==n)i.settings().elementsBuffer(r.elements).apply((function(){i.drawsElements(r.primitivesType,n)}));else{if(!e)throw new Error("Invalid draw dataset");i.drawArrays(r.primitivesType,e)}}))},t.prototype.dispose=function(){this.program.dispose(),this.attributes.dispose(),this.instances.dispose(),this.elements.dispose()},t}();function u(t,e,n){return new o(t,e,r.source(n))}})),i.register("anxmg",(function(e,n){t(e.exports,"Type",(()=>i),(t=>i=t)),t(e.exports,"val",(()=>d),(t=>d=t)),t(e.exports,"TypeMap",(()=>l),(t=>l=t)),t(e.exports,"source",(()=>p),(t=>p=t));var r,i,a,o,u,s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},s.apply(this,arguments)},c=(r=0,function(){return r++});(a=i||(i={})).Scalar="float",a.Vector2="vec2",a.Matrix2="mat2",a.Vector3="vec3",a.Matrix3="mat3",a.Vector4="vec4",a.Matrix4="mat4",a.Boolean="bool",a.Sampler="sampler2D",(u=o||(o={})).High="highp",u.Medium="mediump",u.Low="lowp",function(t){t.size=function(e){switch(e){case t.Boolean:case t.Scalar:case t.Sampler:return 1;case t.Vector2:case t.Matrix2:return 2;case t.Vector3:case t.Matrix3:return 3;case t.Vector4:case t.Matrix4:return 4}},t.vector=function(e){switch(e){case 2:return t.Vector2;case 3:return t.Vector3;case 4:return t.Vector4}},t.numeric=function(e){switch(e){case 1:return t.Scalar;case 2:return t.Vector2;case 3:return t.Vector3;case 4:return t.Vector4}},t.isVector=function(e){return e===t.Vector2||e===t.Vector3||e===t.Vector4},t.isMatrix=function(e){return e===t.Matrix2||e===t.Matrix3||e===t.Matrix4}}(i||(i={}));var l,f=function(){function t(t){void 0===t&&(t=new Map),this.cache=t,this.global="",this.local=""}return t.prototype.once=function(t,e){if(this.cache.has(t))return this.cache.get(t);var n=e();return this.cache.set(t,n),n},t.prototype.getGlobal=function(){return this.global},t.prototype.addGlobal=function(t){return this.global+=t,this},t.prototype.getLocal=function(){return this.local},t.prototype.addLocal=function(t){return this.local+=t,this},t.prototype.child=function(){return new t(this.cache)},t}(),h=function(){function t(e){this.getValue=e,this.sin=t.unary("sin"),this.cos=t.unary("cos"),this.radians=t.unary("radians"),this.degrees=t.unary("degrees"),this.tan=t.unary("tan"),this.asin=t.unary("asin"),this.acos=t.unary("acos"),this.exp=t.unary("exp"),this.log=t.unary("log"),this.exp2=t.unary("exp2"),this.log2=t.unary("log2"),this.sqrt=t.unary("sqrt"),this.inversesqrt=t.unary("inversesqrt"),this.abs=t.unary("abs"),this.sign=t.unary("sign"),this.floor=t.unary("floor"),this.ceil=t.unary("floor"),this.fract=t.unary("fract"),this.normalize=t.unary("normalize"),this.not=t.unary("!"),this.texture2D=function(e){return t.call("texture2D",[this,e],(function(){return i.Vector4}))},this.lt=t.bool("<"),this.gt=t.bool(">"),this.lte=t.bool("<="),this.gte=t.bool(">="),this.eq=t.bool("=="),this.neq=t.bool("!=")}return t.call=function(e,n,r){var i=-1!=="==+-*/<><=>=!&&||".indexOf(e),a=n.map((function(t){return"number"==typeof t?d(t):t}));return 2===n.length&&i?new t((function(t){var n=a.map((function(e){return e.getValue(t)}));return{type:r(n.map((function(t){return t.type}))),content:"(("+n[0].content+") "+e+" ("+n[1].content+"))"}})):new t((function(t){var n=a.map((function(e){return e.getValue(t)}));return{type:r(n.map((function(t){return t.type}))),content:e+"("+n.map((function(t){return t.content})).join(", ")+")"}}))},t.unary=function(e){return function(){return t.call(e,[this],(function(t){return t[0]}))}},t.prototype.round=function(){return this.add(.5).floor()},t.prototype.atan=function(e){return void 0===e?t.call("atan",[this],(function(t){return t[0]})):t.call("atan",[this,e],(function(t){return t[0]}))},t.prototype.pow=function(e){var n="number"==typeof e?d(e):e;return t.call("pow",[this,n],(function(t){return t[0]}))},t.prototype.mod=function(e){var n="number"==typeof e?d(e):e;return t.call("mod",[this,n],(function(t){return t[0]}))},t.prototype.min=function(e){var n="number"==typeof e?d(e):e;return t.call("min",[this,n],(function(t){return t[0]}))},t.prototype.max=function(e){return t.call("max",[this,e],(function(t){return t[0]}))},t.prototype.mix=function(e,n){return t.call("mix",[this,e,n],(function(t){return t[0]}))},t.prototype.clamp=function(e,n){return t.call("clamp",[this,e,n],(function(t){return t[0]}))},t.prototype.smoothstep=function(e,n){return t.call("smoothstep",[e,n,this],(function(t){return t[0]}))},t.prototype.length=function(){return t.call("length",[this],(function(){return i.Scalar}))},t.prototype.distance=function(e){return t.call("distance",[this,e],(function(){return i.Scalar}))},t.prototype.dot=function(e){return t.call("dot",[this,e],(function(){return i.Scalar}))},t.prototype.reflect=function(e){return t.call("reflect",[this,e],(function(t){return t[0]}))},t.prototype.refract=function(e,n){return t.call("refract",[this,e,n],(function(t){return t[0]}))},t.prototype.add=function(e){return t.call("+",[this,e],(function(t){var e=t[0],n=t[1];return e===i.Scalar?n:e}))},t.prototype.sub=function(e){return t.call("-",[this,e],(function(t){var e=t[0],n=t[1];return e===i.Scalar?n:e}))},t.prototype.div=function(e){return t.call("/",[this,e],(function(t){var e=t[0],n=t[1];return e===i.Scalar?n:e}))},t.prototype.mul=function(e){return t.call("*",[this,e],(function(t){var e=t[0],n=t[1];return e===i.Scalar||e===n?n:n===i.Scalar||i.isVector(e)?e:i.isVector(n)?n:e}))},t.bool=function(e){return function(n){return t.call(e,[this,n],(function(){return i.Boolean}))}},t.prototype.and=function(e){return t.call("&&",[this,e],(function(){return i.Boolean}))},t.prototype.or=function(e){return t.call("||",[this,e],(function(){return i.Boolean}))},t.prototype.mem=function(e){var n=this,r="mem"+c();return new t((function(t){var i=n.getValue(t);return t.once(r,(function(){t.addLocal(e+" "+i.type+" "+r+" = "+i.content+";\n")})),{type:i.type,content:r}}))},t.prototype.memHQ=function(){return this.mem(o.High)},t.prototype.memMQ=function(){return this.mem(o.Medium)},t.prototype.memLQ=function(){return this.mem(o.Low)},t.prototype.cond=function(e,n,r){var a=this,o="cond"+c(),u=null;return new t((function(t){return t.once(o,(function(){var s=t.child(),c=n.getValue(s),l=t.child(),f=r.getValue(l),h=a.getValue(t);u=c.type,t.addGlobal(s.getGlobal()).addGlobal(l.getGlobal()),t.addLocal((c.type!==i.Boolean?e+" ":"")+c.type+" "+o+";\n").addLocal("if ("+h.content+") {\n").addLocal(s.getLocal()).addLocal(o+" = "+c.content+";\n").addLocal("} else {\n").addLocal(l.getLocal()).addLocal(o+" = "+f.content+";\n").addLocal("}\n")})),{type:u,content:o}}))},t.prototype.condHQ=function(t,e){return this.cond(o.High,t,e)},t.prototype.condMQ=function(t,e){return this.cond(o.Medium,t,e)},t.prototype.condLQ=function(t,e){return this.cond(o.Low,t,e)},t.prototype.take=function(e,n,r,a){var o=this;return new t((function(t){var u=[e,n,r,a].filter((function(t){return void 0!==t})),s=o.getValue(t);return{type:1===u.length?i.Scalar:i.vector(u.length),content:"("+s.content+")."+u.map((function(t){return"xyzw".charAt(t)})).join("")}}))},t.prototype.vec2=function(){var e=this;return new t((function(t){return{type:i.Vector2,content:"vec2("+e.getValue(t).content+")"}}))},t.prototype.vec3=function(){var e=this;return new t((function(t){return{type:i.Vector3,content:"vec3("+e.getValue(t).content+")"}}))},t.prototype.vec4=function(){var e=this;return new t((function(t){return{type:i.Vector4,content:"vec4("+e.getValue(t).content+")"}}))},t.prototype.x=function(){return this.take(0)},t.prototype.y=function(){return this.take(1)},t.prototype.z=function(){return this.take(2)},t.prototype.w=function(){return this.take(3)},t.prototype.r=function(){return this.take(0)},t.prototype.g=function(){return this.take(1)},t.prototype.b=function(){return this.take(2)},t.prototype.a=function(){return this.take(3)},t.prototype.cat=function(e){var n=this;return"number"==typeof e?this.cat(t.val(e)):new t((function(t){var r=n.getValue(t),a=e.getValue(t),o=i.numeric(i.size(r.type)+i.size(a.type));return{type:o,content:o+"("+r.content+", "+a.content+")"}}))},t.val=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(1===e.length){if("boolean"==typeof e[0])return new t((function(){return{type:i.Boolean,content:e[0]?"1":"0"}}));if(e[0]instanceof t)return e[0];var r=e[0].toString();return new t((function(){return{type:i.Scalar,content:/[e\.]/.test(r)?r:r+".0"}}))}if(e.some((function(t){return"number"==typeof t}))){var a=e.map((function(e){return t.val(e)}));return t.val.apply(null,a)}return e.reduce((function(t,e){return t.cat(e)}))},t.PI=t.val(Math.PI),t}();function p(t){var e=t.uniforms,n=t.attributes,r=t.varyings,a=t.instances,o=t.fragment,u=t.vertex,c=l.values("uniform",e),p=l.values("attribute",s(s({},n),a||{})),d=r?l.values("varying",r):{},y=new f;Object.keys(d).forEach((function(t){d[t].getValue(y)}));var g=u(s(s({},c),p)),m=Object.keys(g).map((function(t){return t+" = "+g[t].getValue(y).content+";\n"})).join(""),v=y.getGlobal()+"void main() {\n"+y.getLocal()+m+"}\n",b=new f;Object.keys(d).forEach((function(t){d[t].getValue(y)}));var w=o(s(s(s({},c),d),{gl_FragCoord:new h((function(){return{type:i.Vector4,content:"gl_FragCoord"}})),gl_PointCoord:new h((function(){return{type:i.Vector2,content:"gl_FragCoord"}})),gl_FrontFacing:new h((function(){return{type:i.Boolean,content:"gl_FrontFacing"}}))})).gl_FragColor.getValue(b);return{vertex:v,fragment:b.getGlobal()+"void main() {\n"+b.getLocal()+"gl_FragColor = "+w.content+";\n}\n",uniforms:l.withoutPrecision(e),attributes:l.withoutPrecision(n),instances:l.withoutPrecision(a||{})}}!function(t){function e(t){return Array.isArray(t)?t[0]:t}function n(t){var n=0;for(var r in t)n+=i.size(e(t[r]));return n}t.getType=e,t.getPrecision=function(t){return Array.isArray(t)?t[1]:o.High},t.withoutPrecision=function(t){return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r]),n}),{})},t.values=function(e,n){var r={};return Object.keys(n).forEach((function(i){var a=n[i];r[i]=new h((function(n){return n.once("types_map_value_"+i,(function(){n.addGlobal(e+" "+t.getPrecision(a)+" "+t.getType(a)+" "+i+";\n")})),{type:t.getType(a),content:i}}))})),r},t.stride=n,t.layout=function(t){var r=n(t);return Object.keys(t).sort().reduce((function(n,a){var o=n.length?n[n.length-1]:null;return n.push({name:a,stride:r,size:i.size(e(t[a])),offset:o?o.offset+o.size:0}),n}),[])}}(l||(l={}));var d=h.val})),i.register("7MtE5",(function(e,n){var r;function i(t,e){try{return e(t)}finally{t.dispose()}}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=[];try{return t.forEach((function(t){n.push(t())})),e.apply(void 0,n)}finally{n.forEach((function(t){return t.dispose()}))}}}t(e.exports,"use",(()=>i)),t(e.exports,"uses",(()=>a)),(r||(r={})).join=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return{dispose:function(){t.forEach((function(t){return t.dispose()}))}}}}));